# Converter (Windows Forms, FFmpeg GUI)

Простое настольное приложение под Windows для пакетной конвертации видео с использованием FFmpeg через библиотеку Xabe.FFmpeg.

## Возможности
- **Пакетная обработка**: добавление нескольких файлов, удаление выбранных, очистка списка
- **Выбор формата**: MP4, M4V, MKV, AVI, MOV, WEBM, FLV, TS, 3GP, OGV, WMV, GIF
- **Выбор кодеков**: H.264 (libx264), HEVC (libx265), VP9 (libvpx-vp9), AV1 (libsvtav1), Theora, ProRes и аудиокодеки (AAC, MP3, Opus, Vorbis, AC3, FLAC и др.)
  - **Качество и масштаб**: пресеты разрешения или проценты от оригинала, CRF для H.264/H.265
  - **Аудио**: вкл/выкл, выбор кодека и битрейта
  - **Производительность**: настройка потоков, опциональное аппаратное ускорение
- **Копирование потоков (без перекодирования)**: `-c:v copy`/`-c:a copy` для поддерживаемых контейнеров
- **Удобство**: шаблон имени вывода, создание подпапки Converted, журнал операций, прогресс общий и по текущему файлу, регулируемая граница между прогрессом и логом (вертикальный сплиттер)
- **Пресеты**: сохранение/загрузка настроек в файл .preset

## Требования
- Windows 10/11
- .NET 8.0 Desktop Runtime/SDK
- Интернет при первом запуске (автозагрузка FFmpeg)

## Установка и запуск
1. Откройте `Converter.sln` в Visual Studio 2022+ или выполните:
   - `dotnet restore`
   - `dotnet build`
2. Запуск из IDE (F5) или командой:
   - `dotnet run --project Converter.csproj`

При первом запуске приложение автоматически скачает и настроит FFmpeg в `%LocalAppData%/Converter/ffmpeg`. При необходимости путь к бинарникам можно указать в скрытых расширенных настройках (значения заданы по умолчанию).

## Использование
1. Добавьте файлы (кнопка или drag&drop).
2. Задайте параметры на вкладках "Видео" и "Аудио". Настройки вывода (папка, шаблон имени, подпапка `Converted`) находятся на вкладке "Видео". Расширенные настройки скрыты и применены по умолчанию.
3. Укажите папку сохранения (в "Видео"). При желании включите подпапку `Converted`.
4. Нажмите "Начать конвертацию". Прогресс и лог отображаются снизу; границу между ними можно перетаскивать.

## Пресеты
- Сохранение: "Сохранить пресет" → файл с расширением `.preset`.
- Загрузка: "Загрузить пресет" и выберите сохранённый `.preset`.

## Известные замечания
- Для H.264/H.265 используется `-crf` и `-preset medium` по умолчанию.
- Для MP4 добавляется `-movflags +faststart`.
- Масштабирование использует фильтр `scale` с сохранением чётности размеров кадров.

## Стек и зависимости
- .NET 8.0, Windows Forms
- NuGet: `Xabe.FFmpeg (6.0.2)`, `Xabe.FFmpeg.Downloader (5.1.0)`

## Лицензия
Укажите лицензию проекта (например, MIT) или сообщите, если репозиторий приватный.
